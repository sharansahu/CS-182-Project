% PACKAGES

\usepackage{amssymb}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{mathrsfs}
\usepackage{afterpage}


\theoremstyle{remark}

\usepackage{epstopdf}
\usepackage[separate-uncertainty = true,multi-part-units=single]{siunitx}
\usepackage{booktabs}
\usepackage{blkarray}
\usepackage[toc,page]{appendix}
\usepackage{color}
\usepackage{pgfplotstable}
\usepackage{url}
\usepackage{multirow}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{nicematrix}
\usepackage{makecell}
\usepackage[round]{natbib}   % omit 'round' option if you prefer square brackets
\usepackage{bm}
\usepackage{pifont}

\usepackage{setspace}
% \doublespacing
\usepackage{float}

\usepackage{tikz}
\usepackage{tikz-cd}
\usepackage{tkz-euclide}
\usepackage[american, siunitx]{circuitikz}
\usetikzlibrary{automata, arrows, calc, decorations.pathmorphing}
\usepgfplotslibrary{groupplots}
\usepackage[framemethod=TikZ]{mdframed}

\usepackage[final]{pdfpages}
\usepackage{graphicx}
\usepackage{multicol}
\usepackage{color}
\usepackage{hyperref}
\usepackage{listings}
\usepackage[shortlabels]{enumitem}
\usepackage{nicefrac}
\usepackage{relsize}
\usepackage{scalefnt}
\usepackage{algorithm}
\usepackage{subcaption}
\usepackage{algpseudocode}
\usepackage{physics}
\usepackage{pgfplots}
\usepackage[usestackEOL]{stackengine}
\usepackage{bigints}
\usepackage{adjustbox}
\usepackage{cancel}
\usepackage{commath}
\usepackage{mathdots}
\usepackage{cases}
\usepackage[font=small,labelfont=bf]{caption}
\usepackage{xr}
\usepackage{cleveref}

\pgfplotsset{compat=1.14}

\allowdisplaybreaks
\setcounter{MaxMatrixCols}{20}

%% SIUnitX setup
\sisetup{per-mode=fraction}
\sisetup{quotient-mode=fraction}
\DeclareSIUnit{\decade}{dec}

%% PGF/Tikz Setup
\newcommand{\globalcircuitwirethickness}{0.9pt}
\ctikzset{bipoles/thickness=1}
\ctikzset{tripoles/thickness=1}
\ctikzset{grounds/thickness=1}
\ctikzset{tripoles/pmos style/emptycircle}
\tikzset{every picture/.style={line width=\globalcircuitwirethickness}}

\pgfplotscreateplotcyclelist{grayscale}{
    thick,white!10!black,mark=x,mark options=solid, dashed\\%
    thick,white!20!black,mark=o,mark options=solid\\%
  }

% Enable importing from q.uiver.app (GUI for diagram editing)
% This is really ugly but it's from the author of q.uiver.app (see https://q.uiver.app/quiver.sty)
\tikzset{curve/.style={settings={#1},to path={(\tikztostart)
    .. controls ($(\tikztostart)!\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    and ($(\tikztostart)!1-\pv{pos}!(\tikztotarget)!\pv{height}!270:(\tikztotarget)$)
    .. (\tikztotarget)\tikztonodes}},
    settings/.code={\tikzset{quiver/.cd,#1}
        \def\pv##1{\pgfkeysvalueof{/tikz/quiver/##1}}},
      quiver/.cd,pos/.initial=0.35,height/.initial=0}
\tikzset{tail reversed/.code={\pgfsetarrowsstart{tikzcd to}}}
\tikzset{2tail/.code={\pgfsetarrowsstart{Implies[reversed]}}}
\tikzset{2tail reversed/.code={\pgfsetarrowsstart{Implies}}}
\tikzset{no body/.style={/tikz/dash pattern=on 0 off 1mm}}


%% Hyperref setup
\hypersetup{
    colorlinks=true,
    linkcolor=blue,
    urlcolor=purple,
}

%% Listing setup (for code)
\lstset{basicstyle=\ttfamily}

%%% MACROS
%% Common macros
\newcommand{\wh}[1]{\widehat{#1}}
\newcommand{\wt}[1]{\widetilde{#1}}
\newcommand{\ol}[1]{\overline{#1}}

%% Emphasis macros
\newcommand{\fillin}[1]{\underline{\hskip #1}}
\newcommand{\doublehrule}{\hrule \vskip 0.02in \hrule}
\newcommand{\circled}[1]{\tikz[baseline=(char.base)]{
  \node[shape=circle,draw,inner sep=2pt] (char) {#1};}}

%% Colors
\definecolor{blueish}{rgb}{0.7,0.1,.7} % used for solutions
\definecolor{darkmagenta}{rgb}{0.55, 0, 0.55}
\definecolor{darkblue}{rgb}{0, 0.5, 0.9}
\definecolor{darkergreen}{rgb}{0, 0.5, 0.2}

\newcommand{\TODO}[1]{{\color{red!70!black} TODO: #1}}
\newcommand{\todo}[1]{{\color{red!70!black} TODO: #1}}
% todo command
\newcommand{\proposal}[1]{{\color{green!70!black} Proposal: #1}} % proposed command

%% Miscellaneous macros
\newcommand{\tageq}{\refstepcounter{equation}\tag{\theequation}}
\newcommand{\thus}{&\implies\quad&}

%% Basic Sets
\newcommand{\R}{\mathbb{R}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}

%% Trig, etc
\newcommand{\atantwo}[1]{\operatorname{atan2}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\e}{\mathrm{e}}
\renewcommand{\j}{\mathrm{j}}
\newcommand{\phase}{\measuredangle}

%% Linear algebra
\newcommand{\Null}[1]{\operatorname{Null}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\Col}[1]{\operatorname{Col}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\Span}[1]{\operatorname{span}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\LNull}[1]{\operatorname{LNull}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\Row}[1]{\operatorname{Row}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\Range}[1]{\operatorname{Range}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\diag}[1]{\operatorname{diag}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\proj}[2]{\operatorname{proj}_{#1}\mathopen{}\pqty{#1}\mathclose{}}
\newcommand{\inner}[2]{\left\langle #1, #2 \right\rangle}
\newcommand{\matdash}{\text{---}}

\DeclareMathOperator*{\argmin}{arg min}
\DeclareMathOperator*{\argmax}{arg max}

\newcommand{\floor}[1]{\left\lfloor#1\right\rfloor}
\newcommand{\ceil}[1]{\left\lceil#1\right\rceil}

%% Cleveref macro
\newcommand{\lcCref}[1]{\lcnamecref{#1}~\labelcref{#1}}

%% Tikz macros
\newcommand{\diagram}[1]{
    \ensuremath{
        \begin{tikzcd}[ampersand replacement=\&]
            #1
        \end{tikzcd}
    }
}

%% HW MACROS
\newcommand{\hint}[1]{(\textit{HINT: #1})}
\newcommand{\note}[1]{\textit{NOTE}: #1}


%% EXAM MACROS
\mdfdefinestyle{examCustom}{%
    linecolor=black,
    outerlinewidth=0.1pt,
    roundcorner=2pt,
    innertopmargin=10pt,
    innerbottommargin=10pt,
    innerrightmargin=10pt,
    innerleftmargin=10pt,
    leftmargin = 4pt,
    rightmargin = 4pt,
    nobreak=true
}

\newcommand{\shortjustify}{\textit{Justify your answer.}}
\newcommand{\justify}{\textit{Show your work and justify your answers.}}
\newcommand{\explain}{\textit{Show your work and explain your answers.}}
\newcommand{\justanswer}{\textit{Write your answers in the provided box.}}
\newcommand{\noworkneeded}{\textit{You do not need to show your work for this subpart.}}



%% LEGACY MACROS
%\newcommand{\mat}[1]{\ensuremath{\begin{bmatrix}#1\end{bmatrix}}} % here for legacy reasons -- consider using \bmqty{a & b \\ c & d} instead

\newcommand{\eqn}[1]{\begin{alignat*}{4}#1\end{alignat*}} % here for legacy reasons -- consider not using this


\newcommand{\at}[1]{\biggr\rvert_{#1}} % here for legacy reasons -- consider using \eval{x}_{y}^{z} in future

\newcommand{\insertfigintable}[1]{
	\includegraphics[width=0.25\textwidth]{#1}
}

%%% Helpful Math %%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\DeclareMathOperator*{\softmax}{\sigma}
\DeclareMathOperator*{\bern}{\text{Bern}}
%\DeclareMathOperator*{\argmax}{arg\,max\,}
%\DeclareMathOperator*{\argmin}{arg\,min\,}
\DeclareMathOperator*{\dom}{dom}
\DeclareMathOperator*{\range}{range}
%\DeclareMathOperator*{\rank}{rank}

%\DeclareMathOperator*{\diag}{diag}
%\DeclareMathOperator*{\Null}{null}
\DeclareMathOperator*{\sign}{sign}

%\newcommand{\C}{\mathbb{C}}
\newcommand{\prob}{\mathbb{P}}
\newcommand{\F}{\mathbb{F}}
%\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
%\newcommand{\R}{\mathbb{R}}
%\newcommand{\Z}{\mathbb{Z}}
\newcommand{\calA}{\mathcal{A}}
\newcommand{\calB}{\mathcal{B}}
\newcommand{\calC}{\mathcal{C}}
\newcommand{\calD}{\mathcal{D}}
\newcommand{\calF}{\mathcal{F}}
\newcommand{\calH}{\mathcal{H}}
\newcommand{\calI}{\mathcal{I}}
\newcommand{\calL}{\mathcal{L}}
\newcommand{\calM}{\mathcal{M}}
\newcommand{\calN}{\mathcal{N}}
\newcommand{\calP}{\mathcal{P}}
\newcommand{\calR}{\mathcal{R}}
\newcommand{\calX}{\mathcal{X}}
\renewcommand{\vec}[1]{\boldsymbol{\mathbf{#1}}}
\newcommand{\rvec}[1]{\boldsymbol{\mathbf{#1}}}

\newcommand{\isep}{\mathrel{{.}\,{.}}\nobreak}
\newcommand{\Lagr}{\mathcal{L}}

\newcommand{\tilw}{\vec{\tilde{w}}}
\newcommand{\tilX}{\mat{\tilde{X}}}
\newcommand{\tilv}{\vec{\tilde{v}}}
\newcommand{\matX}{\mat{X}}
\newcommand{\matA}{\mat{A}}

\newcommand{\mat}[1]{\mathbf{#1}}
\newcommand{\matlit}[1]{\begin{bmatrix}#1\end{bmatrix}}
\newcommand{\tran}{{}^{\!\top\!}}
\newcommand{\inv}{^{-1}}
\newcommand{\fro}{_\textsc{f}}
\newcommand{\halfpow}{^{\frac{1}{2}}}
\newcommand{\neghalfpow}{^{-\frac{1}{2}}}
\renewcommand{\angle}[1]{\langle #1 \rangle}
\newcommand{\bigangle}[1]{\left\langle #1 \right\rangle}
%\newcommand{\inner}[2]{\angle{#1, #2}}
\newcommand{\biginner}[2]{\bigangle{#1, #2}}
\newcommand{\p}{p}
\renewcommand{\P}{P}
\renewcommand{\Pr}{\mathbf{P}}
\newcommand{\pr}[1]{\P(#1)}
\newcommand{\prbig}[1]{\P\big(#1\big)}
\newcommand{\prbigg}[1]{\P\bigg(#1\bigg)}
\newcommand{\prlr}[1]{\P\left(#1\right)}
\newcommand{\comp}{^\text{c}}
\newcommand{\given}{|}

\newcommand{\E}{\mathbb{E}}
%\renewcommand{\ev}{\mathbb{E}}
\newcommand{\evwrt}[2]{\mathbb{E}_{#1}[#2]}
\renewcommand{\var}{\operatorname{Var}}
\newcommand{\cov}{\operatorname{Cov}}
\newcommand{\iid}{\overset{\text{iid}}{\sim}}
%\newcommand{\term}[1]{\textbf{#1}}
%\newcommand{\tab}{\hspace{0.5cm}}
\renewcommand{\a}{\vec{a}}
\renewcommand{\b}{\vec{b}}
%\newcommand{\e}{\vec{e}}
\newcommand{\g}{\vec{g}}
\newcommand{\h}{\vec{h}}
\renewcommand{\o}{\vec{o}}
%\newcommand{\q}{\vec{q}}
\renewcommand{\r}{\vec{r}}
\newcommand{\s}{\vec{s}}
\newcommand{\x}{\vec{x}}
\newcommand{\y}{\vec{y}}
\renewcommand{\r}{\vec{r}}
\renewcommand{\v}{\vec{v}}
\newcommand{\w}{\vec{w}}
\newcommand{\z}{\vec{z}}
\newcommand{\A}{\mat{A}}
\newcommand{\B}{\mat{B}}
\newcommand{\I}{\mat{I}}
\newcommand{\X}{\mat{X}}
\newcommand{\U}{\mat{U}}
\newcommand{\V}{\mat{V}}
\newcommand{\W}{\rvec{W}}
\newcommand{\T}{\tran}
\newcommand{\covw}[1]{
\mat{\Sigma}_{\W}^{\sfrac{#1}{2}}
}
\newcommand{\Y}{\rvec{Y}}
\newcommand{\vecdim}{d}
\newcommand{\nummeas}{t}
\newcommand{\el}[2]{(\vec{#1})_{#2}}
\newcommand{\pe}[1]{^{(#1)}}

\newcommand{\Ind}{\mathbf{I}}
\newcommand{\xye}{\tilde{\x}}
\newcommand{\dotcup}{\mathbin{\dot{\cup}}}
\newcommand{\bigdotcup}{\mathop{\dot{\bigcup}}}
%\newcommand{\Span}{\operatorname{span}}
\newcommand{\tru}{_\text{true}}

%\newcommand{\exp}{\operatorname{exp}}
